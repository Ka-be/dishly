@startuml
!define RECTANGLE_STYLE skinparam rectangle {\n    BackgroundColor<<frontend>> LightBlue\n    BackgroundColor<<backend>> LightGreen\n    BackgroundColor<<external>> LightYellow\n}

title Architecture Dishly - Supabase Stack

' Frontend
rectangle "Frontend" <<frontend>> {
    component [Expo App\nReact Native\n(iOS, Android, Web)] as Client
    note right of Client
        - Expo Router
        - Tamagui UI
        - @supabase/supabase-js
    end note
}

' Supabase Backend
rectangle "Supabase (Backend)" <<backend>> {
    component [Auth\nService] as Auth
    component [PostgreSQL\nDatabase] as DB
    component [Storage\n(Images)] as Storage
    component [PostgREST\nAuto-generated API] as API
    component [Edge Functions\n(Logique métier)] as Functions
    
    note right of Auth
        - Google OAuth
        - Email/Password
        - JWT tokens
    end note
    
    note right of DB
        - Tables: profiles, recipes,
          ingredients, steps, etc.
        - Row Level Security (RLS)
    end note
}

' External Services
cloud "Services Externes" <<external>> {
    component [Google OAuth] as Google
}

' Connexions
Client -down-> Auth : Authentification
Client -down-> API : Requêtes REST/GraphQL
Client -down-> Storage : Upload/Download images
Client -down-> Functions : Logique métier

Auth -right-> Google : OAuth flow
Auth -down-> DB : User management
API -down-> DB : CRUD operations
Storage -down-> DB : Metadata
Functions -down-> DB : Custom queries
@enduml