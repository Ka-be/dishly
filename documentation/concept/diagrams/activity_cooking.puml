@startuml
start

:Utilisateur ouvre une recette;

partition "PrÃ©paration" {
  :Affichage onglet "IngrÃ©dients";
  
  if (Ajuster les portions ?) then (oui)
    :Modifier le nombre de personnes;
    :Recalcul automatique des quantitÃ©s;
  else (non)
  endif
  
  :Passer Ã  l'onglet "Ã‰tapes";
}

:Activer le "Mode Pas-Ã -Pas";

partition "Mode Pas-Ã -Pas" #LightBlue {
  :Afficher Ã‰tape 1;
  
  repeat
    :Lire l'instruction de l'Ã©tape;
    
    if (Ã‰tape avec timer ?) then (oui)
      :Afficher bouton "DÃ©marrer timer";
      
      if (DÃ©marrer le timer ?) then (oui)
        :Timer ajoutÃ© Ã  la barre en haut;
        :Timer dÃ©marre en arriÃ¨re-plan;
        note right
          Le timer continue mÃªme
          si l'utilisateur change d'Ã©tape
        end note
      else (non)
      endif
    else (non)
    endif
    
    if (Ã‰tape terminÃ©e ?) then (oui)
      :Swiper vers la droite;
      :Passer Ã  l'Ã©tape suivante;
    else (non)
      :Rester sur l'Ã©tape actuelle;
    endif
    
    if (Timer terminÃ© ?) then (oui)
      :Notification + vibration;
      :Afficher message "Ã‰tape X terminÃ©e";
    else (non)
    endif
    
  repeat while (DerniÃ¨re Ã©tape ?) is (non)
  -> oui;
  
  :Afficher "Recette terminÃ©e ! ğŸ‰";
  :Proposer "Retour" ou "Recommencer";
}

stop
@enduml